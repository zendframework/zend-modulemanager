<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="zend-modulemanager">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>The Module Autoloader - zend-modulemanager</title>

    <link rel="stylesheet" href="../css/styles-e3f3751b65.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    <div class="subnavigation hidden-print">
    <h4 class="subnavigation__title">
        <a href="..">zend-modulemanager</a>
    </h4>

    <h5 class="subnavigation__subtitle">Table of Contents</h5>

    <ul class="subnavigation__list">
        
            
                <li class="subnavigation__list-item ">
                    <a href="../intro/" class="subnavigation__link">Intro</a>
                </li>
            
        
            
                <li class="subnavigation__list-item">
                    <span class="subnavigation__headline">Reference</span>
                    <ul class="subnavigation__list">
                        
                            
    <li class="subnavigation__list-item ">
        <a href="../module-manager/" class="subnavigation__link">The Module Manager</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../module-class/" class="subnavigation__link">The Module Class</a>
    </li>

                        
                            
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">The Module Autoloader</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../best-practices/" class="subnavigation__link">Best Practices when Creating Modules</a>
    </li>

                        
                    </ul>
                </li>
            
        
    </ul>
</div>
                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-modulemanager</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-modulemanager/" class="header__link header__link--github" title="Go to repository of zend-modulemanager">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
  <li><a href="https://framework.zend.com/">Home</a></li>
  <li><a href="https://docs.zendframework.com/">Docs</a></li>
  <li><a href="..">zend-modulemanager</a></li>
  
    
      
        <li>Reference</li>
      
    
  
  <li class="active">The Module Autoloader</li>
</ol>


    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#module-autoloader-usage" class="toc__link">Module Autoloader Usage</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#non-standard-explicit-module-paths" class="toc__link">Non-Standard / Explicit Module Paths</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#packaging-modules-with-phar" class="toc__link">Packaging Modules with Phar</a>
                    </li>
                
            </ul>
        </div>
    


    <h1 id="the-module-autoloader">The Module Autoloader</h1>
<p>zend-modulemanager ships with the default module autoloader
<code>Zend\Loader\ModuleAutoloader</code>. It is a specialized autoloader responsible for
locating and on-demand loading of, the <code>Module</code> classes from a variety of
sources.</p>
<h2 id="module-autoloader-usage">Module Autoloader Usage</h2>
<p>By default, the provided <code>Zend\ModuleManager\Listener\DefaultListenerAggregate</code>
sets up the <code>ModuleAutoloader</code>; as a developer, you need only provide an array
of module paths, either absolute or relative to the application's root, for the
<code>ModuleAutoloader</code> to check when loading modules. The <code>DefaultListenerAggregate</code>
will take care of instantiating and registering the <code>ModuleAutoloader</code> for you.</p>
<blockquote>
<h3 id="must-be-in-application-root">Must be in application root</h3>
<p>In order for paths relative to your application directory to work, you must
have the directive <code>chdir(dirname(__DIR__));</code> in your <code>public/index.php</code> file.</p>
</blockquote>
<h3 id="registering-module-paths-with-the-defaultlisteneraggregate">Registering module paths with the <code>DefaultListenerAggregate</code></h3>
<p>The following example will search for modules in three different <code>module_paths</code>.
Two are local directories of this application and the third is a system-wide
shared directory.</p>
<pre class="codehilite"><code class="language-php">// public/index.php
use Zend\ModuleManager\Listener;
use Zend\ModuleManager\ModuleManager;

chdir(dirname(__DIR__));

// Instantiate and configure the default listener aggregate
$listenerOptions = new Listener\ListenerOptions([
    'module_paths' =&gt; [
        './module',
        './vendor',
        '/usr/share/zfmodules',
    ]
]);
$defaultListeners = new Listener\DefaultListenerAggregate($listenerOptions);

// Instantiate the module manager
$moduleManager = new ModuleManager([
    'Application',
    'FooModule',
    'BarModule',
]);

// Attach the default listener aggregate and load the modules
$moduleManager-&gt;getEventManager()-&gt;attachAggregate($defaultListeners);
$moduleManager-&gt;loadModules();</code></pre>

<blockquote>
<h3 id="module-paths-are-fifo">Module paths are FIFO</h3>
<p>Module paths behave very similar to PHP's <code>include_path</code> and are searched in
the order they are defined. If you have modules with the same name in more
than one registered module path, the module autoloader will return the first
one it finds.</p>
<h3 id="disabling-the-moduleautoloader">Disabling the ModuleAutoloader</h3>
<ul>
<li>Since 2.8.0</li>
</ul>
<p>If you are using Composer to autoload, you may not need to use the
<code>ModuleAutoloader</code>. As such, you can disable it by passing the following
option to the <code>ListenerOptions</code> class:</p>
<pre class="codehilite"><code class="language-php">'use_zend_loader' =&gt; false,</code></pre>

<p>If your project was begun from the <a href="https://github.com/zendframework/ZendSkeletonApplication">skeleton application</a>,
place the above within the <code>module_listener_options</code> configuration of your
<code>config/application.config.php</code> file:</p>
<pre class="codehilite"><code class="language-php">return [
    /* ... */
    'module_listener_options' =&gt; [
        'use_zend_loader' =&gt; false,
        /* ... */
    ],
    /* ... */
];</code></pre>

</blockquote>
<h2 id="non-standard-explicit-module-paths">Non-Standard / Explicit Module Paths</h2>
<p>Sometimes you may want to specify exactly where a module is instead of having
<code>Zend\Loader\ModuleAutoloader</code> try to find it in the registered paths.</p>
<h3 id="registering-a-non-standard-explicit-module-path">Registering a Non-Standard / Explicit Module Path</h3>
<p>In this example, the autoloader will first check for <code>MyModule\Module</code> in
<code>/path/to/mymoduledir-v1.2/Module.php</code>. If it's not found, then it will fall
back to searching any other registered module paths.</p>
<pre class="codehilite"><code class="language-php">// ./public/index.php
use Zend\Loader\ModuleAutoloader;
use Zend\ModuleManager\Listener;
use Zend\ModuleManager\ModuleManager;

chdir(dirname(__DIR__));

// Instantiate and configure the default listener aggregate
$listenerOptions = new Listener\ListenerOptions([
    'module_paths' =&gt; [
        './module',
        './vendor',
        '/usr/share/zfmodules',
        'MyModule' =&gt; '/path/to/mymoduledir-v1.2',
    ]
]);
$defaultListeners = new Listener\DefaultListenerAggregate($listenerOptions);

/**
 * Without DefaultListenerAggregate:
 *
 * $moduleAutoloader = new ModuleAutoloader([
 *     './module',
 *     './vendor',
 *     '/usr/share/zfmodules',
 *     'MyModule' =&gt; '/path/to/mymoduledir-v1.2',
 * ]);
 * $moduleAutoloader-&gt;register();
 *
 */

// Instantiate the module manager
$moduleManager = new ModuleManager([
    'MyModule',
    'FooModule',
    'BarModule',
]);

// Attach the default listener aggregate and load the modules
$moduleManager-&gt;getEventManager()-&gt;attachAggregate($defaultListeners);
$moduleManager-&gt;loadModules();</code></pre>

<p>This same method works if you provide the path to a phar archive.</p>
<h2 id="packaging-modules-with-phar">Packaging Modules with Phar</h2>
<p>If you prefer, you may easily package your module as a
<a href="http://php.net/phar">phar archive</a>. The module autoloader is able to autoload
modules in the following archive formats: .phar, .phar.gz, .phar.bz2, .phar.tar,
.phar.tar.gz, .phar.tar.bz2, .phar.zip, .tar, .tar.gz, .tar.bz2, and .zip.</p>
<p>Package your module by performing a tar the module directory. You can then
replace the <code>MyModule/</code> directory with <code>MyModule.tar</code>, and it should still be
autoloaded without any additional changes!</p>
<blockquote>
<h3 id="avoid-compression">Avoid compression</h3>
<p>If possible, avoid using any type of compression (bz2, gz, zip) on your phar
archives, as it introduces unnecessary CPU overhead to each request.</p>
</blockquote>



    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../module-class/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../best-practices/">
                    Next <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>


<div class="help-wanted">
    <p>
        Found a mistake or want to contribute to the documentation?
        <a href="https://github.com/zendframework/zend-modulemanager/edit/master/docs/book/module-autoloader.md" target="_blank" class="help-wanted__link">
            Edit this page on GitHub!
        </a>
    </p>
</div>
                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    <div class="subnavigation hidden-print">
    <h4 class="subnavigation__title">
        <a href="..">zend-modulemanager</a>
    </h4>

    <h5 class="subnavigation__subtitle">Table of Contents</h5>

    <ul class="subnavigation__list">
        
            
                <li class="subnavigation__list-item ">
                    <a href="../intro/" class="subnavigation__link">Intro</a>
                </li>
            
        
            
                <li class="subnavigation__list-item">
                    <span class="subnavigation__headline">Reference</span>
                    <ul class="subnavigation__list">
                        
                            
    <li class="subnavigation__list-item ">
        <a href="../module-manager/" class="subnavigation__link">The Module Manager</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../module-class/" class="subnavigation__link">The Module Class</a>
    </li>

                        
                            
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">The Module Autoloader</a>
    </li>

                        
                            
    <li class="subnavigation__list-item ">
        <a href="../best-practices/" class="subnavigation__link">Best Practices when Creating Modules</a>
    </li>

                        
                    </ul>
                </li>
            
        
    </ul>
</div>
                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2018 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script>
        var base_url = '..',
            siteName = 'zend-modulemanager';
    </script>
    <script src="../js/scripts-dcbafde59f.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
